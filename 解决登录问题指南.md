# 解决"用户名或密码错误"问题

## 问题原因

系统目前有两种认证方式：
1. **本地用户系统** - 需要先注册账号（当前可用）
2. **Lark OAuth 登录** - 尚未实现

您遇到的错误是因为尝试用 Lark 账号登录本地系统。

## 解决方案

### 方案一：注册本地账号（推荐）

1. 打开测试页面 `test-lark-sync.html`
2. 在登录界面点击"注册"
3. 填写以下信息：
   - 用户名（3-30字符）
   - 邮箱
   - 密码（至少6字符）
   - 显示名称
4. 注册成功后使用该账号登录

### 方案二：验证 Lark API 权限

1. **获取 App Token**
   - 打开您的飞书多维表格
   - 从URL中获取 App Token
   - URL格式：`https://xxx.feishu.cn/base/[APP_TOKEN]?table=tblxxx`

2. **运行权限测试**
   ```bash
   # 编辑 test-lark-auth.js，将 APP_TOKEN 替换为实际值
   node test-lark-auth.js
   ```

3. **检查应用权限**
   - 确保飞书应用有访问多维表格的权限
   - 在飞书开放平台检查应用权限配置
   - 确保表格已共享给应用

### 方案三：快速测试数据同步

即使不能使用 Lark 账号登录，您仍可以：

1. **使用本地账号测试同步功能**
   ```bash
   # 启动测试
   双击 test-lark-sync.bat
   ```

2. **注册本地测试账号**
   - 用户名：test
   - 密码：test123
   - 邮箱：test@example.com

3. **登录后测试同步**
   - 点击"同步所有数据"
   - 查看 Bug 和需求列表

## 验证清单

- [ ] 已获取正确的 App Token
- [ ] 飞书应用权限已配置
- [ ] 多维表格已授权给应用
- [ ] App ID 和 Secret 正确（已确认）
- [ ] 表格 ID 正确（已确认）

## 后续开发建议

如需实现 Lark OAuth 登录：
1. 在飞书开放平台配置 OAuth 回调地址
2. 实现 `/api/auth/oauth/lark` 端点
3. 添加用户信息映射逻辑
4. 自动创建或关联本地用户

## 立即可用的功能

即使没有 Lark OAuth，您仍可以：
- 使用本地账号系统
- 同步 Lark 数据到本地
- 查看和管理任务
- 使用所有其他功能

系统设计是将 Lark 作为数据源，而非认证源。